# API 文档

## 1. 请求

### 请求 URL

```
POST  /api/process_question1/
```

### 请求头

- `Content-Type: application/json` — 表明请求体内容是 JSON 格式。

### 请求体

请求体必须是一个 JSON 对象，包含以下字段：

| 字段名       | 类型   | 描述                                                         | 是否必填 |
| ------------ | ------ | ------------------------------------------------------------ | -------- |
| `user_input` | string | 用户提问的内容                                               | 是       |
| `role`       | string | 角色类型（可以是：`bargaining`（砍价）、`interview`（面试）、`new_year`（拜年）） | 是       |

#### 请求示例

```
面试请求如下

{
    "user_input": "请问如何提高面试成功率？",
    "role": "interview"
}
```

### 请求成功的返回

返回值是一个 JSON 对象，包含以下字段：

| 字段名        | 类型   | 描述              | 说明                                 |
| ------------- | ------ | ----------------- | ------------------------------------ |
| `ai_response` | string | AI 返回的回复内容 | 如果请求成功，会包含 AI 的回答内容。 |

#### 响应示例

```
面试成功响应如下

{
    "ai_response": "提高面试成功率的方法包括：充分准备面试、了解公司文化、以及展示你的技能和经验。"
}
```

### 请求失败的返回

当请求失败时，返回一个 JSON 对象，包含以下字段：

| 字段名  | 类型   | 描述         |
| ------- | ------ | ------------ |
| `error` | string | 错误信息描述 |

#### 响应示例

```
面试失败响应如下

{
    "error": "xxxxx"
}
```

## 2. 处理流程

1. **前端请求**：前端向后端发送一个 POST 请求，包含 `user_input` 和 `role` 字段。
2. 后端处理
   - 后端从请求中获取 `user_input` 和 `role`。
   - 根据 `role` 从 `api_keys` 中选择相应的 API 信息。
   - 获取会话 ID，并发送用户提问。
   - 调用质谱 API 获取 AI 回复内容。
3. **返回响应**：后端将 AI 回复内容（或错误信息）返回给前端。



## 3.关于配置

不管是`local_settings`还是`pro_settings`都是一样的，都可以用，默认使用的`local_settings`中的配置



